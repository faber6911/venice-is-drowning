col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1987 <- read_delim("../data/tides/Punta_Salute_1987.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1988 <- read_delim("../data/tides/Punta_Salute_1988.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1)
data_1989 <- read_delim("../data/tides/Punta_Salute_1989.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1990 <- read_delim("../data/tides/Punta_Salute_1990.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1991 <- read_delim("../data/tides/Punta_Salute_1991.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1992 <- read_delim("../data/tides/Punta_Salute_1992.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1993 <- read_delim("../data/tides/Punta_Salute_1993.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1994 <- read_delim("../data/tides/Punta_Salute_1994.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1995 <- read_delim("../data/tides/Punta_Salute_1995.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1996 <- read_delim("../data/tides/Punta_Salute_1996.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1997 <- read_delim("../data/tides/Punta_Salute_1997.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1)
data_1998 <- read_delim("../data/tides/Punta_Salute_1998.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_1999 <- read_delim("../data/tides/Punta_Salute_1999.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number(),
col_skip(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2000 <- read_delim("../data/tides/Punta_Salute_2000.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number(),
col_skip(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*366)
data_2001 <- read_delim("../data/tides/Punta_Salute_2001.csv", delim=";", locale=locale("it"),
col_types = cols_only(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number(),
col_skip(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2002 <- read_delim("../data/tides/Punta_Salute_2002.csv", delim=";", locale=locale("it"),
col_types = cols_only(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number(),
col_skip(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2003 <- read_delim("../data/tides/Punta_Salute_2003.csv", delim=";", locale=locale("it"),
col_types = cols_only(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number(),
col_skip(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2004 <- read_delim("../data/tides/Punta_Salute_2004.csv", delim=";", locale=locale("it"),
col_types = cols_only(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2005 <- read_delim("../data/tides/Punta_Salute_2005.csv", delim=";", locale=locale("it"),
col_types = cols_only(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2006 <- read_delim("../data/tides/Punta_Salute_2006.csv", delim=";", locale=locale("it"),
col_types = cols_only(
col_date("%d-%b-%y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2007 <- read_delim("../data/tides/Punta_Salute_2007.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%y"),
col_time("%H.%M"),
col_number(),
col_skip(),
col_skip(),
col_skip(),
col_skip(),
col_skip(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2008 <- read_delim("../data/tides/Punta_Salute_2008.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2009 <- read_delim("../data/tides/Punta_Salute_2009.csv", delim=";", locale=locale("it"),
col_types = cols(
col_date("%d-%b-%y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2010 <- read_delim("../data/tides/Punta_Salute_2010.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2011 <- read_delim("../data/tides/Punta_Salute_2011.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2012 <- read_delim("../data/tides/Punta_Salute_2012.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2013 <- read_delim("../data/tides/Punta_Salute_2013.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number(),
col_skip()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2014 <- read_delim("../data/tides/Punta_Salute_2014.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2015 <- read_delim("../data/tides/Punta_Salute_2015.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1,
n_max=24*365)
data_2016 <- read_delim("../data/tides/Punta_Salute_2016.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2017 <- read_delim("../data/tides/Punta_Salute_2017.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2018 <- read_delim("../data/tides/Punta_Salute_2018.csv", delim=";",
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H:%M"),
col_number()),
col_names=c("date", "time", "level"),
skip=1)
data_2018$level <- data_2018$level*100
data_years <- 1983:2018
tt <- list(data_1983, data_1984, data_1985, data_1986, data_1987, data_1988, data_1989, data_1990,
data_1991, data_1992, data_1993, data_1994, data_1995, data_1996, data_1997, data_1998,
data_1999, data_2000, data_2001, data_2002, data_2003, data_2004, data_2005, data_2006,
data_2007, data_2008, data_2009, data_2010, data_2011, data_2012, data_2013, data_2014,
data_2015, data_2016, data_2017, data_2018)
names(tt) <- as.character(data_years)
sapply(names(tt), function(d) head(tt[[d]]["time"],1)==3600 && head(tt[[d]]["date"],1)==paste0(d,'-1-1'))
sapply(names(tt), function(d) tail(tt[[d]]["time"],1)==0 && tail(tt[[d]]["date"],1)==paste0(as.integer(d)+1,'-1-1'))
sapply(names(tt), function(d) nrow(tt[[d]])==ifelse(leap_year(as.integer(d)), 24*366, 24*365))
sapply(names(tt), function(d) nrow(tt[[d]])==ifelse(leap_year(as.integer(d)), 24*366, 24*365))
sapply(tt, anyNA)
View(data_1983)
result_tmp <- do.call(rbind, tt)
result <- data.frame(datetime= (result_tmp$date + hours(result_tmp$time)),
level=result_tmp$level)
head(result)
result_tmp <- do.call(rbind, tt)
result <- data.frame(datetime= (result_tmp$date + seconds(result_tmp$time)),
level=result_tmp$level)
head(result)
result_tmp <- do.call(rbind, tt)
result <- data.frame(datetime = as.POSIXct(paste(result_tmp$date, result_tmp$time), format="%Y-%m-%d %H:%M:%S"),
level = result_tmp$level)
head(result)
result_xts <- xts(order.by = as.POSIXct(paste(result_tmp$date, result_tmp$time), format="%Y-%m-%d %H:%M:%S"),
x = result_tmp$level)
result_xts <- xts(order.by=(result_tmp$date + seconds(result_tmp$time)),
x=result_tmp$level)
attr(result_xts, 'frequency') <- 24
write.zoo(result_xts, file="../data/output/venezia_xts.csv", col.names=c("datetime", "level"))
write.csv(result, file="../data/output/venezia.csv", row.names = FALSE)
rm(list = ls())
data_rain_1983_1984 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1980_1984.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=26305)
data_rain_1983_1984[is.na(data_rain_1983_1984)] <- 0.0
data_rain_1985_1989 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1985_1989.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_1985_1989[is.na(data_rain_1985_1989)] <- 0.0
data_rain_1990_1994 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1990_1994.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_1990_1994[is.na(data_rain_1990_1994)] <- 0.0
data_rain_1995_1999 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1995_1999.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_1995_1999[is.na(data_rain_1995_1999)] <- 0.0
data_rain_2000_2002 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_2000_2002.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_2000_2002[is.na(data_rain_2000_2002)] <- 0.0
View(`*tmp*`)
tt <- list(data_rain_1983_1984, data_rain_1985_1989, data_rain_1990_1994,
data_rain_1995_1999, data_rain_2000_2002)
sapply(tt, anyNA)
result_tmp <- do.call(rbind, tt)
result <- data.frame(datetime = as.POSIXct(paste(result_tmp$date, result_tmp$time), format="%Y-%m-%d %H:%M:%S"),
dir_wind =result_tmp$dir_wind,
vel_wind = result_tmp$vel_wind,
rain = result_tmp$rain)
result$datetime <- as.character(result$datetime)
tides <- read.csv("../data/output/venezia.csv")
head(tides)
tides$datetime <- as.POSIXct(tides$datetime, format = "%Y-%m-%d %H:%M:%OS")
tides %>% filter(datetime <= "2002-12-31 23:00:00") -> tides_filtered
tail(tides_filtered)
str(tides_filtered)
str(result)
data_rain_1983_1984 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1980_1984.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=26306)
data_rain_1983_1984[is.na(data_rain_1983_1984)] <- 0.0
data_rain_1985_1989 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1985_1989.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_1985_1989[is.na(data_rain_1985_1989)] <- 0.0
data_rain_1990_1994 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1990_1994.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_1990_1994[is.na(data_rain_1990_1994)] <- 0.0
data_rain_1995_1999 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_1995_1999.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_1995_1999[is.na(data_rain_1995_1999)] <- 0.0
data_rain_2000_2002 <- read_delim("../new_data/dati_meteo/DB_OSSERVATORIO_2000_2002.csv", delim=";",
locale = locale("it"),
col_types = cols_only(
col_date("%d/%m/%Y"),
col_time("%H.%M"),
col_skip(),
col_skip(),
col_number(),
col_number(),
col_skip(),
col_number(),
col_skip()),
col_names=c("date", "time", "dir_wind", "vel_wind", "rain"),
skip=1)
data_rain_2000_2002[is.na(data_rain_2000_2002)] <- 0.0
View(data_rain_2000_2002)
tt <- list(data_rain_1983_1984, data_rain_1985_1989, data_rain_1990_1994,
data_rain_1995_1999, data_rain_2000_2002)
sapply(tt, anyNA)
result_tmp <- do.call(rbind, tt)
result <- data.frame(datetime = as.POSIXct(paste(result_tmp$date, result_tmp$time), format="%Y-%m-%d %H:%M:%S"),
dir_wind =result_tmp$dir_wind,
vel_wind = result_tmp$vel_wind,
rain = result_tmp$rain)
result$datetime <- as.character(result$datetime)
tides <- read.csv("../data/output/venezia.csv")
head(tides)
tides$datetime <- as.POSIXct(tides$datetime, format = "%Y-%m-%d %H:%M:%OS")
tides %>% filter(datetime <= "2002-12-31 23:00:00") -> tides_filtered
str(tides_filtered)
str(result)
tides_filtered$datetime <- as.character(tides_filtered$datetime)
dplr <- left_join(result, tides_filtered)
head(dplr)
sapply(dplr, anyNA)
dplr[is.na(dplr$level),]
dplr <- right_join(result, tides_filtered)
head(dplr)
sapply(dplr, anyNA)
head(tides_filtered)
dplr[is.na(dplr$level),]
merged <- right_join(result, tides_filtered)
head(merged)
sapply(merged, anyNA)
write.csv(merged, file="../data/output/venezia_tides_weather.csv", row.names = FALSE)
library(pandoc)
install.packages("pandoc")
library(pander)
install.packages("pander")
library(pander)
pander(sapply(merged, anyNA))
pander(head(merged))
pander(nrow(tides_filtered),
nrow(result))
pander(c(nrow(tides_filtered),
nrow(result)))
pander(str(result_filtered))
pander(str(result))
